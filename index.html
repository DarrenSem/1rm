<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        input[type="number"] {
            width: 60px;
        }
        table {
            width: 100%;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        @media(max-width: 600px) {
            th, td {
                padding: 5px;
                font-size: 0.9em;
            }
            input[type="number"] {
                width: 50px;
            }
        }
    </style>
</head>
<body>
	<br>
    <label>Reps
        <input id="numReps" type="number" min="1" step="1" value="1" />
    </label>
    
    <label>Weight 
        <input id="weight" type="number" min="1" step="0.1" value="100" />
    </label>
    
    <hr />
	 <label for="maxReps" id="maxRepsLabel" data-text="Show ($) rows"></label>
	
        <input id="maxReps" type="number" min="3" max="100" step="1" placeholder="10" />
        
  <hr />
  
    <table>
        <thead>
            <tr>
                <th>Reps</th>
                <th>Weight</th>
            </tr>
        </thead>
        <tbody id="output">
        </tbody>
    </table>

    <script>
        var PLACES = 3;
      
    	var numRepsInput = document.getElementById("numReps");
    
        var weightInput = document.getElementById("weight");
        
        var maxRepsInput = document.getElementById("maxReps");
        
        var maxRepsLabel = document.getElementById("maxRepsLabel");
        
        var outputTable = document.getElementById("output");

function reverseFooForWeight(onemax, reps) {
    return onemax / (reps > 1 ? (1 + reps / 30) : 1);
}

function reverseFooForReps(onemax, weight) {
    return (onemax/weight - 1) * 30;
}

var getEpley = function(weight1RM, reps){
  
  var result, ratio,  weight;
  
  /*
weight = (
reps === 1
? x
:

ratio = ( 1.0278 - (0.0278 * reps) ) * 100;

weight = weight1RM * (ratio / 100);
*/

weight = reverseFooForWeight(weight1RM, reps);
ratio = ( weight / weight1RM) * 100;
  
  var result = weight.toFixed(PLACES) + ` (${Math.round(ratio, 2)}%)`;
  return result;
 };
 
        var calculate = function(evt) {
          
            var numReps = numRepsInput.valueAsNumber >= 1 ? numRepsInput.valueAsNumber : 1;
            
            var weight = weightInput.valueAsNumber >= 1 ? weightInput.valueAsNumber : 100;

            var maxReps = maxRepsInput.valueAsNumber >= maxRepsInput.min ? maxRepsInput.valueAsNumber : maxRepsInput.placeholder;
            maxReps = Math.min(maxReps, maxRepsInput.max) | 0; // Cap at 30
            maxRepsLabel.innerText = maxRepsLabel.dataset.text.replace("$", maxReps);
            
            
            var validMax = (
              isNaN(maxRepsInput.value)
              || maxRepsInput.value >= maxRepsInput.min
              || false
            );
            
            if(validMax ||
["weight", "numReps"].includes(evt?.target.id)) {
  maxRepsInput.value = maxReps;
};
            
            // TODO: similar foe.other 2 fields, yeah.
            
            
            var maxWeight = weight * ( 1 + ( numReps > 1 ? numReps / 30 : 0) ); // Epley Formula
            
            outputTable.innerHTML = ""; // clear the table
            for (var i = 1; i <= maxReps; i++) {
                var row = document.createElement("tr");
                var cellReps = document.createElement("td");
                var cellWeight = document.createElement("td");
                cellReps.textContent = i;
                
                cellWeight.textContent = getEpley(maxWeight, i);

                row.appendChild(cellReps);
                row.appendChild(cellWeight);
                outputTable.appendChild(row);
                
            };
            
        };
        
        

        numRepsInput.addEventListener("input", calculate);
        weightInput.addEventListener("input", calculate);
        maxRepsInput.addEventListener("input", calculate);

        // Calculate initial values
        calculate();
    </script>
</body>
</html>
